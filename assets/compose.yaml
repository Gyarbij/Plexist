services:
  plexist:
    container_name: plexist
    image: gyarbij/plexist:latest
    # Optional: load variables from an env file (use alongside or instead of inline envs)
    env_file:
      - ../example.env
    environment:
      - PLEX_URL=http://#.#.#.#:32400
      - PLEX_TOKEN=<your plex token>
      - WRITE_MISSING_AS_CSV=1
      - WRITE_MISSING_AS_JSON=0
      - ADD_PLAYLIST_POSTER=1
      - ADD_PLAYLIST_DESCRIPTION=1
      - APPEND_INSTEAD_OF_SYNC=0
      - SECONDS_TO_WAIT=84000
      - MAX_REQUESTS_PER_SECOND=5
      - MAX_CONCURRENT_REQUESTS=4
      - LOG_LEVEL=INFO
      - LOG_FORMAT=plain
      # Liked/Favorited tracks sync (rates matched tracks 5 stars in Plex)
      - SYNC_LIKED_TRACKS=0
      # Spotify configuration
      - SPOTIFY_CLIENT_ID=<your spotify client id>
      - SPOTIFY_CLIENT_SECRET=<your spotify client secret>
      - SPOTIFY_USER_ID=<your spotify user id>
      # Required for Spotify liked tracks sync (OAuth)
      - SPOTIFY_REDIRECT_URI=http://localhost:8888/callback
      - SPOTIFY_CACHE_PATH=/app/data/.spotify_cache
      # Deezer configuration
      - DEEZER_USER_ID=<deezer user id>
      - DEEZER_PLAYLIST_ID=10484834882
      # Apple Music configuration (requires Apple Developer account)
      - APPLE_MUSIC_TEAM_ID=<your team id>
      - APPLE_MUSIC_KEY_ID=<your key id>
      - APPLE_MUSIC_PRIVATE_KEY=/app/data/AuthKey.p8
      - APPLE_MUSIC_USER_TOKEN=<your music user token>
    volumes:
      - <YOURPATH>:/app/data
    restart: unless-stopped