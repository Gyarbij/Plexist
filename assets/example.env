# Plexist Environment Variables
# Copy this file to .env and fill in your values

# ===========================================
# PLEX CONFIGURATION (Required)
# ===========================================
PLEX_URL=http://192.168.0.2:32400
PLEX_TOKEN=your-plex-token

# ===========================================
# GENERAL OPTIONS
# ===========================================
# SQLite database path (persist by mounting /app/data)
DB_PATH=/app/data/plexist.db

# Write missing tracks to CSV file (1=enabled, 0=disabled)
WRITE_MISSING_AS_CSV=0

# Write missing tracks to JSON file (1=enabled, 0=disabled)
WRITE_MISSING_AS_JSON=0

# Add playlist poster from streaming service (1=enabled, 0=disabled)
ADD_PLAYLIST_POSTER=1

# Add playlist description from streaming service (1=enabled, 0=disabled)
ADD_PLAYLIST_DESCRIPTION=1

# Append tracks instead of syncing (0=sync/replace, 1=append only)
APPEND_INSTEAD_OF_SYNC=0

# Seconds to wait between sync cycles (default: 86400 = 24 hours)
SECONDS_TO_WAIT=86400

# ===========================================
# RATE LIMITING
# ===========================================
# Max Plex API requests per second (lower for slow servers)
MAX_REQUESTS_PER_SECOND=5

# Max concurrent Plex requests (lower to reduce CPU load)
MAX_CONCURRENT_REQUESTS=4

# Enable extended Plex cache for faster matching (1=enabled, 0=disabled)
PLEX_EXTENDED_CACHE_ENABLED=1

# Duration bucket size in seconds for matching (smaller = stricter)
PLEX_DURATION_BUCKET_SECONDS=5

# ===========================================
# LOGGING
# ===========================================
# Log level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# Log format: plain or json
LOG_FORMAT=plain

# ===========================================
# LIKED/FAVORITED TRACKS SYNC
# ===========================================
# Sync liked/favorited tracks to Plex by rating them 5 stars
# These tracks appear in Plex's "Liked Tracks" smart playlist
# (1=enabled, 0=disabled)
SYNC_LIKED_TRACKS=0

# ===========================================
# MULTI-SERVICE SYNC
# ===========================================
# Sync playlists between any two services (not just to Plex)
# Format: comma-separated pairs of source:destination
# Examples:
#   SYNC_PAIRS=spotify:qobuz             - Sync Spotify playlists to Qobuz
#   SYNC_PAIRS=tidal:plex                - Sync Tidal playlists to Plex
#   SYNC_PAIRS=spotify:qobuz,tidal:plex  - Multiple sync pairs
#
# Available services: spotify, deezer, apple_music, tidal, qobuz, plex
# Note: Source must have read capability, destination must have write capability
#       (Qobuz, Tidal, and Plex support write operations)
#
# Uses ISRC codes for accurate track matching when available,
# falls back to title/artist/album matching otherwise.
SYNC_PAIRS=

# ===========================================
# SPOTIFY CONFIGURATION
# ===========================================
# Get these from https://developer.spotify.com/dashboard
SPOTIFY_CLIENT_ID=your-spotify-client-id
SPOTIFY_CLIENT_SECRET=your-spotify-client-secret

# Your Spotify user ID (from https://www.spotify.com/account/overview/)
SPOTIFY_USER_ID=your-spotify-user-id

# Required for liked tracks sync (OAuth authentication)
# Must match the redirect URI configured in your Spotify app settings
SPOTIFY_REDIRECT_URI=http://localhost:8888/callback

# Path to cache OAuth tokens (persist across container restarts)
SPOTIFY_CACHE_PATH=/app/data/.spotify_cache

# ===========================================
# DEEZER CONFIGURATION
# ===========================================
# Deezer profile ID (from your profile URL: https://www.deezer.com/profile/########)
DEEZER_USER_ID=your-deezer-user-id

# Specific playlist IDs to sync (space-separated, optional)
# If set, only these playlists are synced instead of all user playlists
DEEZER_PLAYLIST_ID=

# OAuth access token for write operations (creating playlists, adding tracks)
# Required only if using Deezer as a sync destination (e.g., SYNC_PAIRS=spotify:deezer)
#
# How to obtain a Deezer access token:
# 1. Create an app at https://developers.deezer.com/myapps
# 2. Install deezer-python: pip install deezer-python
# 3. Run: deezer-oauth YOUR_APP_ID YOUR_SECRET_KEY
# 4. Open the URL in your browser and authorize the app
# 5. Copy the access token from the callback
#
# Required permissions: manage_library (for playlist creation/modification)
DEEZER_ACCESS_TOKEN=

# ===========================================
# APPLE MUSIC CONFIGURATION
# ===========================================
# Requires Apple Developer account with MusicKit enabled
# See: https://developer.apple.com/documentation/applemusicapi/getting_keys_and_creating_tokens

# Team ID from Apple Developer account (Membership Details page)
APPLE_MUSIC_TEAM_ID=your-team-id

# Key ID for your MusicKit private key
APPLE_MUSIC_KEY_ID=your-key-id

# Path to MusicKit private key file (.p8)
# Download from Apple Developer Portal > Keys > MusicKit
APPLE_MUSIC_PRIVATE_KEY=/app/data/AuthKey.p8

# Music User Token for accessing user library
# Obtain via JavaScript MusicKit.authorize() or Web Authentication endpoint
# See README for detailed instructions
APPLE_MUSIC_USER_TOKEN=your-music-user-token

# Public Apple Music playlists (catalog) - optional
# Use this mode if you don't want to sign in with a Music User Token
# Provide space-separated public playlist IDs and a storefront
APPLE_MUSIC_PUBLIC_PLAYLIST_IDS=
APPLE_MUSIC_STOREFRONT=us

# Apple Music client tuning (optional)
APPLE_MUSIC_DEVELOPER_TOKEN_TTL_SECONDS=43200
APPLE_MUSIC_REQUEST_TIMEOUT_SECONDS=10
APPLE_MUSIC_MAX_RETRIES=3
APPLE_MUSIC_RETRY_BACKOFF_SECONDS=1.0

# ===========================================
# TIDAL CONFIGURATION
# ===========================================
# Tidal uses OAuth for authentication
# Obtain tokens using tidalapi library or Tidal tools
# See README for detailed instructions

# OAuth access token from Tidal
TIDAL_ACCESS_TOKEN=your-tidal-access-token

# OAuth refresh token for automatic token renewal
TIDAL_REFRESH_TOKEN=your-tidal-refresh-token

# Token expiry datetime in ISO format (e.g., 2025-12-31T23:59:59)
TIDAL_TOKEN_EXPIRY=2025-12-31T23:59:59

# Public Tidal playlists (optional)
# Use this mode if you don't want to authenticate
# Provide space-separated playlist UUIDs from Tidal URLs
TIDAL_PUBLIC_PLAYLIST_IDS=

# Tidal client tuning (optional)
TIDAL_REQUEST_TIMEOUT_SECONDS=10
TIDAL_MAX_RETRIES=3
TIDAL_RETRY_BACKOFF_SECONDS=1.0

# ===========================================
# QOBUZ CONFIGURATION
# ===========================================
# Qobuz requires app credentials and user authentication
# App credentials must be obtained from Qobuz desktop/mobile app
# See README for detailed instructions

# Qobuz app credentials (required)
# Obtain from qobuz-dl or similar tools
QOBUZ_APP_ID=your-qobuz-app-id
QOBUZ_APP_SECRET=your-qobuz-app-secret

# User authentication (username/password OR user_auth_token)
QOBUZ_USERNAME=your-email@example.com
QOBUZ_PASSWORD=your-qobuz-password

# Alternative: Provide existing auth token (optional)
# If set, username/password are not required
QOBUZ_USER_AUTH_TOKEN=

# Public Qobuz playlists (optional)
# Use this mode for limited public playlist access
# Provide space-separated playlist IDs from Qobuz URLs
QOBUZ_PUBLIC_PLAYLIST_IDS=

# Qobuz client tuning (optional)
QOBUZ_REQUEST_TIMEOUT_SECONDS=10
QOBUZ_MAX_RETRIES=3
QOBUZ_RETRY_BACKOFF_SECONDS=1.0
# ===========================================
# MUSICBRAINZ ISRC RESOLUTION
# ===========================================
# Enable ISRC-to-MBID resolution via MusicBrainz API
# This improves track matching by using MusicBrainz IDs when direct ISRC
# matching fails. The resolver caches results to minimize API calls.
# (1=enabled, 0=disabled)
MUSICBRAINZ_ENABLED=1

# Cache duration for successful ISRC lookups (days)
# MusicBrainz data is relatively stable, so 90 days is a good default
MUSICBRAINZ_CACHE_TTL_DAYS=90

# Cache duration for ISRCs not found in MusicBrainz (days)
# Shorter TTL allows re-checking if new data was added
MUSICBRAINZ_NEGATIVE_CACHE_TTL_DAYS=7

# Optional MusicBrainz API key (sent as Bearer token)
MUSICBRAINZ_API_KEY=